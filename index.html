<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Headers Formatter</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<style>
body { background-color: #0f172a; color: #f1f5f9; }
textarea { resize: none; }
button.copy-btn {
    background-color: #14b8a6;
    color: white;
}
button.copy-btn:hover {
    background-color: #0f766e;
}
</style>
</head>
<body class="flex flex-col items-center min-h-screen p-6">

<h1 class="text-5xl font-bold mb-8 text-center text-cyan-400 drop-shadow-lg">Headers Formatter</h1>

<div class="w-full max-w-5xl flex flex-col gap-6">

    <!-- Input -->
    <div class="flex flex-col gap-2">
        <label class="font-semibold text-lg">Paste Raw Headers:</label>
        <textarea id="input" class="w-full h-64 p-4 rounded-lg bg-slate-800 text-white border border-slate-700 placeholder-slate-400" placeholder="Paste your headers here..."></textarea>
        <div class="flex justify-between items-center">
            <div class="flex items-center gap-2">
                <input type="checkbox" id="includeCookies" class="w-4 h-4">
                <label for="includeCookies" class="text-white font-medium">Include cookies</label>
            </div>
            <button onclick="copyText('input')" class="copy-btn px-4 py-2 rounded-lg shadow-lg font-semibold">Copy Input</button>
        </div>
    </div>

    <!-- Output -->
    <div class="flex flex-col gap-2">
        <label class="font-semibold text-lg">Formatted Python Dict:</label>
        <pre id="output" class="rounded-lg p-4 bg-slate-900 overflow-x-auto"><code class="language-python"></code></pre>
        <div class="flex justify-end">
            <button onclick="copyText('output')" class="copy-btn px-4 py-2 rounded-lg shadow-lg font-semibold">Copy Output</button>
        </div>
    </div>

    <button onclick="formatHeaders()" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all self-center">Format Headers</button>

</div>

<script>
function formatHeaders() {
    const raw = document.getElementById("input").value.split("\n");
    const includeCookies = document.getElementById("includeCookies").checked;

    let lines = raw.map(l => l.trim()).filter(l => l !== "");
    let line_lists = [];
    let skipNext = false;

    for (let i = 0; i < lines.length; i++) {
        let line = lines[i];
        if (skipNext) { skipNext = false; continue; }
        if (line.startsWith(":")) { skipNext = true; continue; }
        if (line.toLowerCase() === "cookie" && !includeCookies) { skipNext = true; continue; }
        line_lists.push(line);
    }

    let headers = {};
    for (let i = 0; i < line_lists.length - 1; i += 2) {
        headers[line_lists[i]] = line_lists[i + 1];
    }

    let output = "headers = {\n";
    for (let key in headers) {
        output += `    '${key}': '${headers[key]}',\n`;
    }
    output += "}";

    const codeBlock = document.querySelector("#output code");
    codeBlock.textContent = output;
    Prism.highlightElement(codeBlock);
}

// Copy to clipboard
function copyText(id) {
    const element = document.getElementById(id);
    const code = element.tagName === "TEXTAREA" ? element : element.querySelector("code");
    navigator.clipboard.writeText(code.value || code.textContent)
        .then(() => alert("Copied to clipboard!"))
        .catch(() => alert("Failed to copy."));
}

// Optional: live formatting as you type
document.getElementById("input").addEventListener("input", () => {
    formatHeaders();
});
</script>

</body>
</html>
